
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Contractor &#8212; t3kton 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction to Contractor" href="Introduction.html" />
    <link rel="prev" title="Project t3kton" href="../index.html" />

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159896960-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-159896960-1');
</script>

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="contractor">
<h1>Contractor<a class="headerlink" href="#contractor" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction to Contractor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#foundations-and-structures">Foundations and Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#sites">Sites</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#complexes">Complexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#side-track-to-the-manifesto">Side Track to the Manifesto</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#blueprints">BluePrints</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tryit/index.html">Give it a Try</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tryit/installing.html">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/installing.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/packaged.html">From Prebuilt Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/source.html">From Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/setup_amt.html">AMT Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/setup_ipmi.html">IPMI Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/setup_vcenter.html">VCenter/ESX Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/setup_virtualbox.html">VirtualBox Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/setup_docker.html">Docker Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/complex.html">Setting up VM Host</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/install_baremetal.html">Setup Bare-metal</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/create_vm.html">Creating a VM (Ubuntu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/create_vm.html#creating-a-vm-centos">Creating a VM (CentOS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/create_vm.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/config_info.html">Accessing Configuration Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/destroy_vm.html">Removing the VM(s)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/destroy_vm.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="tryit/docker.html">Working with Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ConfigurationValues.html">Configuration Values</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#global-and-config-attributes">Global and Config Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#value-merging">Value Merging</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#value-overlay-rules">Value Overlay Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#sources-of-configuration-values">Sources of Configuration Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#attribute-values">Attribute Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#global-attribute-values">Global attribute values</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigurationValues.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Networking.html">Networking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Networking.html#networked">Networked</a></li>
<li class="toctree-l2"><a class="reference internal" href="Networking.html#ip-addresses">Ip Addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="Networking.html#networks">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Networking.html#networkinterfaces">NetworkInterfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Modules.html">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#blueprint">BluePrint</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#building">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#foreman">Foreman</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#site">Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#subcontractor">SubContractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#user">User</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#lib">lib</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html#tscript">tscript</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tscript.html">tscript</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tscript.html#built-in-functions">built in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tscript.html#examples">examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tscript.html#gramer">gramer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins.html">Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#amt">AMT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#aws">AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#azure">Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#vcenter">VCenter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#virtualbox">VirtualBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#manual">Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#iputils">IPUtils</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins.html#ssh">SSH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins.html#todo">TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="Resources.html">Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Resources.html#os-base">OS Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="Resources.html#utility">Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="Resources.html#vmware">VMWare</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="API.html">CInP API Documentation for Contractor API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root">Namespace - root</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-auth">Namespace - root.Auth</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-azure">Namespace - root.Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-blueprint">Namespace - root.BluePrint</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-building">Namespace - root.Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-directory">Namespace - root.Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-foreman">Namespace - root.Foreman</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-manual">Namespace - root.Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-postoffice">Namespace - root.PostOffice</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-records">Namespace - root.Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-site">Namespace - root.Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-subcontractor">Namespace - root.SubContractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-utilities">Namespace - root.Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-vcenter">Namespace - root.VCenter</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html#namespace-root-virtualbox">Namespace - root.VirtualBox</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Contractor is a builder of anything, and is targeted to be used as a generic API
to create/destroy/manipluate your resources no matter where or what they are.
This enables you to focus on what you want to make, and not have to worry about
the details and differences in deployment.</p>
<p>To accomplish this, Contractor breaks deployment/provisioning into two parts.  A
Structure, or what it is you want to deploy, and a Foundation, or what you want
to deploy it on.  Examples of Foundations are VirtualBox VMs, Docker Containers,
Servers with IPMI, Servers with out out-of-band control, Switches, PDUs, AWS, GCD,
or just about anything else.  A Structure would be a DNS server, API Endpoint,
Load Balanacer, Web Server, Docker Host, VirtualBox Host, CoreOS Server, etc.  To
describe a Structure, a BluePrint is used.  This BluePrint describes configuration
information needed to create the Structure.  There are also BluePrints for Foundations,
which describe firmware, machine level configuration (i.e., IPMI configuration ), as
well as contain information to fingerprint foundations, for example a Foundation
BluePrint can require a certain number of CPUs and Memory, PCI devices, as well
as storage details.  Each Structure and Foundation belong to a grouping called
a Site.  Sites can belong to other Sites, and a Structure does not need to belong
to the same Site as its foundation.  The Site can also contain configuration
information that the Structures and Foundations that belong to it inherit.
This way a configuration such as DNS Server can be maintained at the Site level
and automatically propagate to everything inside that Site.</p>
<p>At its core Contractor has a scripting language called TScript.  Each BluePrint
has a Create and Destroy script that is executed to create and destroy that Structure
or in the case of Foundations, provision and de-provision.  Utility scripts can also
be created, for example, if a new firmware for a storage controller is released.
A utility script can be created to deploy this new firmware, and a Job can be created
to execute the script.  Jobs are run by the Foreman subsystem.  When a new Foundation
has been detected, or a Structure’s Foundation has been provisioned, Foreman will
provide instructions to a SubContractor daemon to do individual tasks required
for that Foundation to be Provisioned or Structure to be created.</p>
<p>SubContractor is a daemon that is run in appropriate parts of the network for
handling tasks as requested by the Script being executed in the Job.  All tasks
are asked for by SubContracor, over HTTP (fully proxyable) thus Contractor itself
does not have to have access to sensitive parts of the network, it only
needs to be visible to SubContractor.  Each SubContractor can be configured to
only do certain types of work.  For example, a SubContractor can be configured to
do only IPMI tasks enabling the IPMI network to be isolated from other networks.
Other SubContractors can then handle PXE booting the servers and perform other checks
such as checking to see if port 22 is open (a common and easy way to make sure
a Structure with SSH installed has sucessfully booted).</p>
</div>
<div class="section" id="future">
<h2>Future<a class="headerlink" href="#future" title="Permalink to this headline">¶</a></h2>
<p>Contractor being able to build everything can also be used as a single source of
truth, thus providing a place where you can ask questions such as “How many Load
Balancers do we have”, “What Services will taking this host down affect”, or
“How many VM resources are being used to support this service”.  Contractor has a
Bind zone file generating ability that can be used to maintain DNS records, which
will automatically update when things are added/removed.  With Contractor you do
not have to wait for a new VM to register with a service.  That Service can query
Contractor to know what should be registered with it and act if a registered
resource is not connected.  Contractor will also have webhooks so that services can
be notified on Creation/Destruction events or even hardware events, thus allowing
a service able to ask for a harddrive replacment to wait until it is able
to take that harddrive out of service nicely.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contractor</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#future">Future</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Project t3kton</a></li>
      <li>Next: <a href="Introduction.html" title="next chapter">Introduction to Contractor</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Peter Howe.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>